Site.productSlide={};(function(M,W,q){var A,N=-1,X,n,at,ao=null,j="",ae="",J,S,b,w,z,u,l,G,k=82;W.data={};W.dom={};W.cachePreviewImgList=[];var aa=Fai.top._lcid==2052||Fai.top._lcid==1028;function H(){var av=[];av.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">');av.push('	<div class="f-contentBg J_contentBg J_popup_bg"></div>');av.push('	<div class="f-content J_content" id="fk-productSlideContent">');av.push('		<div class="f-innerContent">');af(av);av.push("		</div>");av.push('		<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>');av.push('		<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>');av.push('		<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>');av.push("	</div>");av.push("</div>");return av}function af(av){av.push('<div class="f-multiContent J_multiContent">');L(av);av.push("</div>");av.push('<div class="f-albumsContent J_albumsContent">');E(av);av.push("</div>")}function L(av){av.push('<div class="f-multiContent-left J_multiContentLeft">');K(av);av.push("</div>");av.push('<div class="f-multiContent-right J_multiContentRight">');ab(av);av.push("</div>")}function K(av){av.push('<div class="f-productPicContent J_productPicContent">');av.push('	<div class="f-productImg J_productImg">');av.push('		<div class="f-productImgLoading"></div>');av.push("	</div>");av.push('	<div class="f-productImgGroup J_productImgGroup" style="display:none;">');av.push('		<div class="f-productImgGroupBg"></div>');av.push('		<div class="f-imgListWrap J_imgListWrap">');av.push("		</div>");av.push('		<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>');av.push('		<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>');av.push("	</div>");av.push("</div>");av.push('<div class="f-shareContent J_shareContent">');av.push("</div>")}function ab(av){av.push('<div class="f-productDetailContent J_productDetailContent">');av.push("</div>");av.push('<div class="optionMsg"></div>');av.push('<div class="f-productBuyContent J_productBuyContent">');av.push("</div>")}function V(){if(!W.data.nowData){return""}var aT=[],aL=[],bk=W.data,a7=bk.nowData,bp=a7.propList||[],aU=typeof(a7.saleId)!="undefined"?a7.saleId:0,aI=typeof(a7.salePromotion)!="undefined"?a7.salePromotion:[],a1="g_stress mallPriceBig f-mallPriceWrap",a0="g_minor mallMarketPrice f-mallPriceWrap",aE="",bi="",aA=false,aD=false,a9=false,be="",av="",aR,aJ,bq,a3,a6,aK,bh,aM,aN;G=((S<100&&S>1)||(a7.actualPrice!=a7.mallPrice));if(w){if("actualPrice" in a7){b=a7.actualPrice}if("discount" in a7){S=a7.discount}else{S=100}G=((S<100&&S>1)||(a7.actualPrice!=a7.mallPrice));z=a7.indepPrice?true:false}if(aI!=null||aI!=[]){aA=true;aD=U(bp);if(aD==true){a9=R(aI,false);if(a9){G=false;aL.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">');aL.push("<table>");aL.push("<tr>");aL.push("<td>");aL.push('<div class="showSaleTimeImg fk-showSaleTimeImg">');aL.push("</div>");aL.push("</td>");aL.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">');aL.push("</td>");aL.push("</tr>");aL.push("</table>");aL.push("</div>")}}}if(typeof(a7.salePromotion)!="undefined"){G=false}aR=a7.name;aM=bp.length;for(bh=0;bh<aM;bh++){aN=bp[bh];aJ=aN.name;bq=aN.type;a3=aN.fileId;a6=aN.value||"";if(M.trim(a6).length<1){continue}if(bq==11&&G){aE=a0;bi=a1}else{if(bq==11&&!G){aE=a1}else{if(bq==12){aE=a0}else{aE=""}}}if(bq==11&&G){be="";av="J_mallPriceClass"}else{if(bq==11&&!G){be="J_mallPriceClass"}else{be=""}}aL.push('<div class="f-propContent '+be+'">');aL.push('<div class="f-propName" title="'+aJ+'" style="width:'+k+'px">'+aJ+'<span class="f-colon">:</span></div>');aL.push('<div class="f-propValue '+aE+'">');if(bq==11){aL.push('	<span class="f-currencyVal">'+at.choiceCurrencyVal+"</span>");if(G){aL.push('	<span class="mallPrice J_realMallAmount">'+(aa?a6:Fai.formatPriceEn(a6))+"</span>");aL.push("	</div>");aL.push("</div>");aL.push('<div class="f-propContent '+av+'">');aL.push('<div class="f-propName" title="'+aJ+'" style="width:'+k+'px">'+u+'<span class="f-colon">:</span></div>');aL.push('<div class="f-propValue '+bi+'">');aL.push('<span class="f-currencyVal">'+at.choiceCurrencyVal+"</span>");var bm="";if(a6.indexOf("~")>=0){if(z){bm=b}else{var ay=a6.split("~");var bl=parseFloat(ay[0])*S*0.01,aC=parseFloat(ay[1])*S*0.01;bm=bl.toFixed(2)+"~"+aC.toFixed(2)}}else{bm=b;bm=parseFloat(bm).toFixed(2)}aL.push('<span class="f-mallPrice mallPrice" id="realMallAmount">'+(aa?bm:Fai.formatPriceEn(bm))+"</span>");aL.push('<span class="fk-mallBuy-big memberPrice">'+(aa?l:Fai.formatPriceEn(l))+"</span>")}else{aL.push('	<span class="mallPrice J_realMallAmount" id="realMallAmount">'+(aa?a6:Fai.formatPriceEn(a6))+"</span>")}}else{if(bq==12){aL.push('<span class="f-currencyVal">'+at.choiceCurrencyVal+"</span>");aL.push('<span class="mallPrice">'+(aa?a6:Fai.formatPriceEn(a6))+"</span>")}else{if(bq==13){aL.push('<span id="mallAmount">'+a6+"</span>")}else{if(bq==16){aL.push('<span id="mallWeight">'+a6+"</span>"+at.weightType)}else{aL.push(a6)}}}}aL.push("</div>");aL.push("</div>")}if(at.mallOpen){if(at.mallShoppingOptions){if("showOptionList" in a7){var aQ=a7.showOptionList||[],bd=a7.oldOptionsStr,aM=aQ.length,aH=a7.optionsAmountList||[];if(G){M.each(aH,function(br,bs){if(z){bs.oPrice=b}else{bs.oPrice=bs.oPrice*S*0.01}})}for(var bh=0;bh<aM;bh++){var ax=aQ[bh],a5=ax.items,bn=ax.fieldKey,aX=0;if(bd){var aV=bd.split("_");for(var bg=0;bg<aV.length;bg++){if(bn==aV[bg]){aX=bg}}}var aw=a5.length;if(aw>0){aL.push('<div class="f-propContent f-optionContent">');aL.push('<div class="f-propName" title="" style="width:'+k+'px">'+Fai.encodeHtml(ax.name)+'<span class="f-colon">:</span></div>');aL.push('<div class="propName" style="display:none;">'+Fai.encodeHtml(ax.name)+"</div>");aL.push('<div class="f-optionValue" style="width:'+(318-k)+'px">');aL.push('<ul class="optionItemWrap J_optionItemWrap" data="'+ax.fieldKey+'" type="'+ax.type+'">');for(var bg=0;bg<aw;bg++){var aO=a5[bg];var aG=aO.i,a4=aO.v,bo=aO.path,aZ=false;if(aH){for(var bf=0;bf<aH.length;bf++){var a2=aH[bf];var aW=a2.t2;var bb;if("flag" in a2){bb=a2.flag}else{bb=1}var bc=aW.split("_");if(bb==1&&aX<bc.length&&bc[aX]==aG){aZ=true;break}}}if(aZ){aL.push('<li class="optionItem">');if(bo){aL.push('<span class="img-n">'+Fai.encodeHtml(a4)+"</span>");var a8=aO.orgPic;if(a8){aL.push('<img class="i-img J-item J-item-img" src="'+bo+'" data="'+aG+'" _fk-org="'+a8+'" faiWidth="'+aO.faiWidth+'" faiHeight="'+aO.faiHeight+'"/>')}else{aL.push('<img class="i-img J-item J-item-img" src="'+bo+'" data="'+aG+'"/>')}}else{aL.push('<a class="J-item oItem" href="javascript:;" hidefocus="true" data="'+Fai.encodeHtmlAttr(aG)+'">');aL.push("<span>"+Fai.encodeHtml(a4)+"</span>");aL.push("</a>")}aL.push('</li">')}}aL.push("</ul>");aL.push("</div>");aL.push("</div>")}}}}if(!ao.hiddenBuybtn){var aB=1;var aY="";var ba="";if(a7.limitAmount_mall){var az=0;var aF=a7.productRestrictInfo;if(aF){if(aF.count){az=aF.count}}var aP=0,aS=a7.minAmount,bj=a7.maxAmount;aP=bj-az;if(Fai.fkEval(aP)<0){aP=-1}if(aS>1&&bj!=0){ba="( "+LS.minAmount+" : "+aS+" ; "+LS.maxAmount+" : "+aP+" )";aY=' _min="'+aS+'" _max="'+aP+'" '}else{if(aS==1&&bj!=0){ba="("+LS.maxAmount+" : "+aP+" )";aY='" _max="'+aP+'" '}else{if(aS>1&&bj==0){ba="( "+LS.minAmount+" : "+aS+")";aY=' _min="'+aS+'" '}}}aB=aS}aL.push('<div class="f-propContent f-countContent">');aL.push('<div class="f-propName" title="" style="width:'+k+'px">'+LS.amountNum+'<span class="f-colon">:</span></div>');aL.push('<div class="f-propValue f-countValue" style="width:'+(318-k)+'px">');aL.push('<input id="cartbuyCountPdSlide" type="text" class="f-cartCountInput" onkeypress="javascript:return Fai.isNumberKey(event);" onchange="Site.mallBuyCountChange(\'PdSlide\')" value="'+aB+'" '+aY+"/>");aL.push('<div class="f-buyCountBtn">');aL.push('<span id="buyCountDesPdSlide" class="f-countBtn mallJia disableMallJian" onclick="Site.desMallBuyCount(\'PdSlide\')"></span>');aL.push('<span id="buyCountIncPdSlide" class="f-countBtn mallJian" onclick="Site.incMallBuyCount(\'PdSlide\')"></span>');aL.push("</div>");aL.push('<span id="limitAmountDiv" class="f-limitAmountDiv" title="'+ba+'">');aL.push(ba);aL.push("</span>");aL.push("</div>");aL.push("</div>")}}aT.push('<div class="f-productNameContent">');aT.push('	<p class="f-productName">');if(ao.titleClick){aK=W.data.nowData.productUrl;aT.push('<a class="f-productTitle" href="'+aK+'" target="_blank">');aT.push(aR);aT.push("</a>")}else{aT.push(aR)}aT.push("	</p>");aT.push("</div>");aT.push('<div class="f-underlineContent">');aT.push('<div class="f-underline"></div>');aT.push("</div>");aT.push('<div class="f-propListContent J_productProp">');aT.push(aL.join(""));aT.push("</div>");return aT.join("")}function U(aw){var av=false,ax;if(aw==null){return av}len=aw.length;for(i=0;i<len;i++){ax=aw[i];type=ax.type;value=ax.value||"";if(M.trim(value).length<1){continue}if(type==11){av=true;break}}return av}function ag(){if(!at.mallOpen&&!at.bookingOpen){return}if(ao.hiddenBuybtn){return}var ay=[],aw=W.dom,aC=at.addCartText||"",aD=at.buyNowText||"",az=at.addCartClickEvent||"",ax=at.buyNowClickEvent||"",aA=at.bookingClicEvent||"";if(at.mallOpen){ay.push('<div class="f-buyContent">');if(at.showShoppingCart==1){ay.push('	<a href="javascript:;" onclick="'+az+'" hidefocus="true" class="fk-mall-addCart f-addCart"><span>'+aC+"</span></a>")}ay.push('	<a href="javascript:;" onclick="'+ax+'" hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img">&nbsp;</span><span>'+aD+"</span></a>");ay.push("</div>")}else{if(at.bookingOpen){var av=at.bookingInfo;var aB="onclick=\"jzUtils.run({'name':'bookingSubmitPanel.init', 'prompt':'true'}, '{&quot;panelHeight&quot;:"+av.panelHeight+", &quot;panelWidth&quot;:"+av.panelWidth+", &quot;pid&quot;:"+Site.productSlide.data.id+"}');\"";ay.push('<div class="f-buyContent">');ay.push('	<a href="javascript:;" '+aB+' hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img fk-bookingIcon">&nbsp;</span><span>'+av.bookingNameStr+"</span></a>");ay.push("</div>")}}return ay.join("")}function E(av){av.push('<div class="f-albumsWrap J_albumsWrap">');av.push("</div>");av.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>');av.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}function I(){var aA=W.dom,aC=W.data;aA.productDetailContent.empty();aA.productDetailContent.append(V());aA.productBuyContent.empty();aA.productBuyContent.append(ag());var aw=W.data.nowData;if(aw){var aF=aw.optionsAmountList,az=aw.relateAmount,aG=aw.mallPrice,aE=aw.productRestrictInfo,ax=aw.limitAmount_options,aI=aw.oldOptionsStr,ay=aw.newOptionsStr,aH=aw.limitAmount_mall,aD=aw.minAmount,aB=aw.maxAmount;var av={moduleId:"PdSlide",optionsAmountList:aF,relateAmount:az,realMallPrice:aG,limitAmount_options:ax,productRestrictInfo:aE,minAmount:aD,maxAmount:aB,limitAmount_mall:aH,oldOptionsStr:aI};Site.productDetailInfo=av;Site.initProductRestrict();if(at.mallShoppingOptions&&typeof(aF)!="undefined"){if(!aI){aI="null"}var aJ=aw.salePromotion;if(typeof(aJ)!="undefined"){Site.salePromotionDetail.salePromotionParam=aJ}Site.initProductOptions();Site.initOptionsStr()}}if(Fai.top._manageMode){s()}}function au(){var aw=W.dom,av=W.data;nowData=av.nowData,multiContentRight=aw.multiContentRight,propList=nowData.propList||[],saleId=typeof(nowData.saleId)!="undefined"?nowData.saleId:0,salePromotion=typeof(nowData.salePromotion)!="undefined"?nowData.salePromotion:[],showSaleCountDownFlag=false,beginTime="",endTime="";at.saleShowType=1;if(salePromotion!=null&&salePromotion!=[]){showSaleMsg=true;findPriceFlag=U(propList);if(findPriceFlag==true){showSaleCountDownFlag=R(salePromotion,true);if(!showSaleCountDownFlag){multiContentRight.find(".J_saleProTimeCount").remove();beginTime=salePromotion.beginTime;endTime=salePromotion.endTime;if(beginTime==null||beginTime==""||endTime==null||endTime==""){Z(salePromotion)}}}}}function F(aK,aP,aw,az){var aA=[],aO=W.dom,aI=aO.multiContentRight,aH="",aQ=LS.salePromotionBegin,aG=LS.salePromotionEnd,aC=0,aE="g_stress mallPriceBig",aM="g_minor mallMarketPrice",ax,aN,ay,aB,aD,aJ,aF,av,aL;if(aw==1){aH=aQ;aC=aK}else{aH=aG;aC=aP}if(aw=="2"){Z(az)}clearInterval(at.saleCountTimeInterval);at.saleCountTimeInterval=setInterval(function(){ax=parseInt(aC/(3600*24));aN=parseInt(aC/3600)-(ax*24);ay=parseInt(aC/60)-(ax*24*60)-(aN*60);aB=parseInt(aC%60);aC--;aD=Fai.format(aH,ax,aN,ay,aB);aI.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+aD);if(aC<0){if(aw==1){aC=aP;aH=aG;aw=2;Z(az)}else{clearInterval(at.saleCountTimeInterval);aI.find(".J_saleRemove").remove();if(az.other.ruleData.s=="1"){aI.find(".J_newMallPriceClass").find(".f-propValue").addClass(aE);aI.find(".J_newMallPriceClass").find(".f-propValue").removeClass(aM);aI.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice")}}}},1000)}function R(aB,az){var aw=false,av=aB.beginTime,ax=aB.endTime,aA=new Date().getTime()+at.timeDiff,ay,aC;if(typeof(av)=="undefined"||av==null||av==""||typeof(ax)=="undefined"||ax==null||ax==""){return aw}ay=new Date(av.replace(/-/g,"/")).getTime();aC=new Date(ax.replace(/-/g,"/")).getTime();if(ay>aA||aC>aA){aw=true}if(az){if(ay>aA){F(parseInt((ay-aA)/1000),parseInt((aC-ay)/1000),1,aB)}else{if(aC>aA){F(parseInt((ay-aA)/1000),parseInt((aC-aA)/1000),2,aB)}}}return aw}function Z(aC){if(at.saleShowType!="1"){return}at.saleShowType=2;var aD=[],aw=[],aN=W.dom,aL=aN.multiContentRight,aO="g_stress mallPriceBig f-mallPriceWrap",az="g_minor mallMarketPrice f-mallPriceWrap",aG,aH,aE,aA,av,aI,aP=[],ay,aK="";if(typeof(aC)=="undefined"||aC==null||aC==""){return}var aJ=aL.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(typeof(aJ)=="undefined"||aJ==null||aJ==""){aJ="#cf0000"}if(aC.saleType=="1"){aA="";av=parseFloat(aC.other.ruleData.d[0].m);aI=M(".J_mallPriceClass").find(".f-propName").attr("title");var aF=M(".J_mallPriceClass").find(".mallPrice").html();if(aF.indexOf("~")>0){var aB=aF.split("~");var ax=parseFloat(aB[0]);if(isNaN(ax)){ax=0}aP.push(ax);ax=parseFloat(aB[1]);if(isNaN(ax)){ax=0}aP.push(ax)}else{var ax=parseFloat(aF);if(isNaN(ax)){ax=0}aP.push(ax)}for(var aM=0;aM<aP.length;aM++){ay=0;if(aC.other.ruleData.s=="1"){if(Fai.top._lcid==2052||Fai.top._lcid==1028){aA=Fai.format(LS.salePromotionDisCount,av)}else{aA=Fai.format(LS.salePromotionDisCount,Fai.formatPriceEn(10*(10-av),null,true))}ay=aP[aM]*(av/10)}else{if(Fai.top._lcid==2052||Fai.top._lcid==1028){aA=Fai.format(LS.salePromotionLapse,av)}else{aA=Fai.format(LS.salePromotionLapse,Fai.formatPriceEn(av,null,true))}ay=aP[aM]-av}if(isNaN(ay)||ay<0){ay=0}if(aM>0){aK+="~"}aK+=ay.toFixed(2)+""}M(".J_mallPriceClass").find(".f-propValue").addClass("fk-saleRelative");aw.push('<div class="f-propContent J_newMallPriceClass">');aw.push('<div class="f-propName" title="'+aI+'" style="width:'+k+'px">'+aI+'<span class="f-colon">:</span></div>');aw.push('<div class="f-propValue '+az+'">');aw.push('<span class="f-currencyVal">'+at.choiceCurrencyVal+"</span>");aw.push('<span class="mallPrice">'+aF+"</span>");aw.push("</div>");aw.push("</div>");M(".J_mallPriceClass").before(aw.join(""));M(".J_mallPriceClass").find(".f-propName").html(LS.promotionPrice+"<span class='f-colon'>:</span>");M(".J_mallPriceClass").find(".mallPrice").html(aK);M(".J_mallPriceClass").find(".f-propName").attr("title",LS.promotionPrice);M(".J_mallPriceClass").addClass("J_saleRemove");aD.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>');aD.push('<td class="fk-saleTdSty1">');aD.push('<div  class="f-trangle " style="border-bottom: 5px solid '+aJ+';">');aD.push("</div>");aD.push("</td>");aD.push('<td class="fk-saleTdSty2">');aD.push('<div class="f-rect" style="background-color:'+aJ+';"  title="'+aC.name+'">');aD.push(aA);aD.push("</div>");aD.push("</td>");aD.push("</tr></table></span>");M(".J_mallPriceClass").find(".f-propValue").append(aD.join(""))}else{aG=aC.other.ruleData.d.length;aH=aG*20+(aG-1)*12+"px";aD.push('<div class="f-propContent J_saleRemove">');aD.push('<div class="f-propName" title="'+LS.salePromotionName+'" style="height:'+aH+";width:"+k+'px">'+LS.salePromotionName+'<span class="f-colon">:</span></div>');aD.push('<div class="f-propValue fk-saleRelative" style="height:'+aH+'">');aD.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+aC.name+'">');for(var aM=0;aM<aG;aM++){if(aM!=0){aE="top:"+(aM*30)+"px"}else{aE="top:0"}aD.push('<span class="fk-saleAbsolute" style="'+aE+'">');aD.push('<span class="saleFullReBg" style="margin:0;background-color:'+aJ+';">');aD.push(Fai.format(LS.salePromotionOnlyFullReduce));aD.push("</span>");aD.push('<span style="margin:0;color:'+aJ+'">');if(aa){aD.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,aC.other.ruleData.d[aM].m,aC.other.ruleData.d[aM].n))}else{aD.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,Fai.formatPriceEn(aC.other.ruleData.d[aM].m,null,true),Fai.formatPriceEn(aC.other.ruleData.d[aM].n,null,true)))}aD.push("</span>");aD.push("</span>")}aD.push("</span>");aD.push("	</div>");aD.push("</div>");aL.find(".J_mallPriceClass").after(aD.join(""))}Site.showSalePromotionDl();if(Fai.top._manageMode){s()}}function x(ax){var ay=W.data,aw={src:"",width:-1,height:-1},av={};M.extend(av,aw,ax);P(av)}function aj(){var ay=W.data,ax=ay.nowData,az,aw,av;if(ax){az=ax.picPath;aw=ax.picwidth;av=ax.picHeight;x({src:az,width:aw,height:av})}}function P(aA){var ay=W.dom,aw=ay.productImg,av=aA.src||"",aC=390,aD=390,az=new Image(),aB=aw.find(".J_nowImg"),ax,aE;if(M.trim(av).length<1){Fai.ing("找不到该图片",true)}if(aB.length>0){if(aB.attr("src")==M.trim(av)){return}}aw.empty().append('<div class="f-productImgLoading"></div>');if(X&&X.onload){X.onload=function(){}}az.onload=function(){var aK=false,aJ=false,aG="",aI=[],aH=[],aF,aL;ax=az.width;aF=ax;aE=az.height;aL=aE;if(ax>=aE&&ax>aC){aK=true;aF=aC}else{if(aE>aD){aJ=true;aL=aD}}if(aK){aG+="width:"+aF+"px;"}if(aJ){aG+="height:"+aL+"px;"}if(aK&&!aJ){aL=aC*az.height/az.width}if(!aK&&aJ){aF=aD*az.width/az.height}if(!ao.picZoom&&!ao.picPopupPD){aH.push('	<a class="f-imgClick" href="'+(W.data.nowData.productUrl)+'" target="_blank" title="'+LS.toProductDetail+'">');aH.push('		<img class="J_nowImg " src="'+av+'" style="'+aG+'" />');aH.push("	</a>")}else{aH.push('	<img class="J_nowImg " src="'+av+'" style="'+aG+'" />')}aI.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">');aI.push("	<tr>");aI.push("		<td>");aI.push(aH.join(""));aI.push("		</td>");aI.push("	</tr>");aI.push("</table>");if(ao.picZoom){aH=[];aH.push(aI.join(""));aI=[];aI.push('<div class="cloud-zoom f-imgWrap" href="'+av+'">');aI.push(aH.join(""));aI.push("</div>")}aw.empty();aw.append(aI.join(""));if(ao.picZoom){aB=aw.find(".cloud-zoom");aB.attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+aC+", maxHeight:"+aD+',position:"inside"');aB.CloudZoom({imageHeight:aE,imageWidth:ax});if(!ao.picPopupPD){setTimeout(function(){aw.find(".mousetrap").append('<a href="'+(W.data.nowData.productUrl)+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看产品详情"></a>')},30)}}};X=az;setTimeout(function(){az.src=av},50)}function e(ax){var aC=[],aD=[],aG=68,aE=0,aB=W.data,ax=aB.id,aI=false,aJ="",aH="",aw=0,az=0,av,ay,aA,aF;aF=A.length;for(aA=0;aA<aF;aA++){if(A[aA].id==ax){av=A[aA];aI=true;break}}if(!aI){return""}ay=av.picPathList||[];aF=ay.length;for(aA=0;aA<aF;aA++){aJ=ay[aA].thumbPath;aH=ay[aA].path;aw=ay[aA].picWidth;az=ay[aA].picHeight;aD.push("<li>");aD.push('	<a href="javascript:;" class="J_pic" onclick="return false;" path="'+aH+'" picwidth="'+aw+'" picheight="'+az+'" >');aD.push('		<img src="'+aJ+'" style="display: block; width:60px; height:60px;" />');aD.push("	</a>");aD.push("</li>");aE+=aG}aC.push('			<div class="f-imgListOuter J_imgListOuter">');aC.push('				<ul class="f-imgList J_imgList" style="width:'+aE+'px;" _num="0">');aC.push(aD.join(""));aC.push("				</ul>");aC.push("			</div>");return aC.join("")}function a(){var ax=W.dom,aw=W.data,av=ax.groupBtn;av.left.removeClass("f-BtnDisabled f-BtnEnabled");av.right.removeClass("f-BtnDisabled f-BtnEnabled");ax.imgListWrap.empty();ax.imgListWrap.append(e(aw.id));ax.imgListOuter=ax.imgListWrap.find(".J_imgListOuter");ax.imgList=ax.imgListWrap.find(".J_imgList");ax.imgList.find(".J_pic").hover(function(){x({src:M(this).attr("path"),width:M(this).attr("picwidth"),height:M(this).attr("picheight")})})}function y(){var az=[],aA=[],av=90,aD=0,ax,aC,aw;if(A&&A.length>0){for(var ay=0,aB=A.length;ay<aB;ay++){ax=A[ay];aC=ax.picThumbPath||"";aw=ax.id;aA.push("<li>");aA.push('	<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+aw+'">');aA.push('		<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+aw+'" _id="'+aw+'">');aA.push('			<img data-src="'+aC+'" class="f_albums_image" />');aA.push("		</a>");aA.push('		<div class="f-albumsImgTip"></div>');aA.push("	</div>");aA.push("</li>");aD+=av}az.push('<div class="f-albumsOuter J_albumsOuter">');az.push('	<ul class="f-albums J_albums" style="width:'+aD+'px;" _num="0">');az.push(aA.join(""));az.push("	</ul>");az.push("</div>")}return az.join("")}function p(){var aw=W.dom,av;aw.albumsWrap.empty();aw.albumsWrap.append(y());aw.albumsOuter=aw.albumsWrap.find(".J_albumsOuter");aw.albums=aw.albumsWrap.find(".J_albums");aw.albumsImgWrap=aw.albums.find(".J_albumsImgWrap");av=aw.albums.children().first().outerWidth()||90,aw.albums.find(".J_albumsImg").click(function(){var ay=M(this).attr("_id"),ax=f(ay);h(ay)});ah();D({index:N,visibleNum:2});aq()}function r(){var aw=W.dom,av=W.data;aw.albumsImgWrap.removeClass("f-albumsImgWrap-selected");aw.albumsImgWrap.filter(".J_albumsImgWrap"+av.id).addClass("f-albumsImgWrap-selected")}function T(aw){var av=W.dom,az=av.albums,aD=av.albumsOuter,ax=av.albumsBtn,ay=0,aA={content:az,contentOuter:aD,button:ax,scrollRow:true,visibleNum:2},aC={},aB=aw.changeProduct||false;M.extend(aC,aA,aw);if(aC.scrollRow){C(aC)}else{ay=ar(aC);D({index:ay,visibleNum:2});B(ay)}ad(aC);M("#fk-productSlidePanel").find(".optionMsg").hide()}function al(az){var aB=W.dom,aA=aB.imgList,av=aB.imgListOuter,ay=aB.groupBtn,ax={content:aA,contentOuter:av,button:ay,scrollRow:true},aw={};M.extend(aw,ax,az);C(aw);ad(aw)}function C(aA){var aE=aA.content,aw=aE.children(),aC=aw.length,aD=aw.first().outerWidth(),aB=aA.contentOuter.width(),aI=parseInt(aB/aD),aH=aA.visibleNum||0,aG=aI-aH,ay=parseInt((aC-aH)/aG),av=parseInt(aE.attr("_num"))||0,az=0,aF=aA.direction;if(aC<=aI){ay=0}else{if((ay*aG-aC)>=0){ay-=1}}if(aF){az=av+1;if(az>ay){az=0;ah(0);aE.stop(true).animate({left:"0"});aE.attr("_num",az)}else{var ax=-(az*aG*aD);ah(ax);aE.stop(true).animate({left:ax+"px"});aE.attr("_num",az)}}else{az=av-1;if(az<0){az=ay}var ax=-(az*aG*aD);ah(ax);aE.stop(true).animate({left:ax+"px"});aE.attr("_num",az)}}function D(aB){var ay=W.dom,aG=ay.albums,aw=aG.children(),aE=aw.length,aF=aw.first().outerWidth(),aC=ay.albumsOuter.width(),aK=parseInt(aC/aF),aJ=aB.visibleNum||0,aI=aK-aJ,az=0,av=parseInt(aG.attr("_num"))||0,aA=0,aH=0,aD=aB.index;if(aJ>parseInt(aK/2)){aJ=parseInt(aK/2);aI=aK-aJ}if(aE>aK&&aD>=aI){az=parseInt((aE-aJ)/aI);if((az*aI-aE)>=0){az-=1}aA=parseInt((aD-aJ)/aI);aH=parseInt(aD/aI)}else{az=0;aA=0;aH=0}if(aA>az){aA=0}else{if(aA<0){aA=az}}if(av==aA||av==aH){return}var ax=-(aA*aI*aF);ah(ax);aG.stop(true).animate({left:ax+"px"});aG.attr("_num",aA)}function d(){if(W.cachePreviewImgList.length){return W.cachePreviewImgList}return W.cachePreviewImgList=W.dom.albums.children()}function ah(aw){var aA=parseInt(aw||0),ay=d(),ax=W.dom.albumsWrap.width(),aC=ay.eq(0).outerWidth(true),aD=parseInt(Math.abs(aA)/aC),aB=aD+Math.ceil(ax/aC);for(var az=aD;az<aB;az++){var av=ay.eq(az).find("img");if(!av.length||av.attr("src")){continue}av.attr("src",av.attr("data-src"))}}function ar(aB){var aF=aB.content,ax=aF.children(),aD=ax.length,aE=ax.first().outerWidth(),aC=aB.contentOuter.width(),aw=0,av=N,aG=aB.direction,aI=0,aH=1,az=aB.cycle||false,ay,aA;ay=aD-(aD%aH);if(aG){aA=av+aH;if(aA<ay){aI=aA}else{if(av>ay){aI=0}else{if(ay==aD){aI=ay-1;if(az){aI=0}return aI}if(ay==av){aI=ay;return aI}aI=ay}}}else{aA=av-aH;if(aA>aw){aI=aA}else{if(av<aw){aI=0}else{aI=aw;if(aw==av){if(az){aI=aD-1}return aI}}}}return aI}function ad(az){var aE=az.content,aw=aE.children(),aC=aw.length,aD=aw.first().outerWidth(),aA=az.contentOuter.width(),aB=az.button,aH=parseInt(aA/aD),aG=az.visibleNum||0,aF=aH-aG,ax=parseInt((aC-aG)/aF),av=parseInt(aE.attr("_num"))||0,ay=0;if(aC<=aH){ax=0}else{if((ax*aF-aC)>=0){ax-=1}}ay=av+1;if(ay>ax){ay=0;aB.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{aB.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}ay=av-1;if(ay<0){aB.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{aB.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}}function aq(){var aB=W.dom,aA=aB.albums,av=aB.albumsOuter,az=aB.albumsBtn,ay=0,ax={content:aA,contentOuter:av,button:az,scrollRow:true},aw={};M.extend(aw,ax,{scrollRow:true});ad(aw)}function ak(){var aA=W.dom,az=aA.imgList,av=aA.imgListOuter,ay=aA.groupBtn,ax={content:az,contentOuter:av,button:ay,scrollRow:true},aw={};M.extend(aw,ax,{scrollRow:true});ad(aw)}function an(ax){var ay=[],aw,av;ay.push(ax.qsUrl);ay.push("&cmd=list");M.ajax({type:"get",cache:false,url:Site.genAjaxUrl("productSlide_h.jsp")+ay.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aB){var az=M.parseJSON(aB),aA=W.data;if(az.success){A=az.list;ao=az.setInfo;at=az.data;ae=at.css;S=at.levelDiscount;u=at.memberPrice;w=at.proIndepDisc;l=at.memberPriceLabel;k=ao.prop2;if(Fai.top._manageMode){J=az.itemList}if(A.length<1){Fai.ing("没有产品信息");return}aw=new Date().getTime();av=at.svrTimeLong;at.timeDiff=av-aw;at.saleShowType=1;at.saleCountTimeInterval="";if(at.productId==-1){aA.id=A[0].id}else{aA.id=at.productId}N=f(aA.id);if(N==-1){Fai.ing("没有该产品信息");return}else{aA.nowData=A[N]}t()}else{Fai.ing("获取数据失败",false)}}})}function o(){if(!ao.shareShow){return}W.dom.shareContent.addClass("f-shareContentIniting");clearTimeout(n);n=setTimeout(function(){var av=[];av.push("cmd=share");av.push("&id="+W.data.id);av.push("&browserTitle="+Fai.top.document.title);M.ajax({type:"post",url:Site.genAjaxUrl("productSlide_h.jsp"),data:av.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",false)},success:function(ay){var ax=M.parseJSON(ay),az=W.dom,aw="";if(ax.success){aw=ax.content||""}else{Fai.ing("获取数据失败",false)}az.shareContent.removeClass("f-shareContentIniting");az.shareContent.empty().append(aw)}})},300)}function f(ay){var aw=-1,ax,av;if(A&&A.length>0){av=A.length;for(ax=0;ax<av;ax++){if(A[ax].id==ay){aw=ax;break}}}return aw}function B(av){if(N==av){return}if(A&&A[av]){h(A[av].id)}}function h(ax){var av=-1,aw=W.data;av=f(ax);if(av==-1){Fai.ing("没有该产品信息");return}else{if(av==N){return}}N=av;aw.id=parseInt(ax);aw.nowData=A[N];g()}function g(){W.dom.imgList=null;aj();I();au();a();o();r();setTimeout(function(){am()},50)}function Q(aw){var av=new Image();av.src=aw}function am(){var az=W.data,ay=az.nowData,ax=ay.picPathList||[],aw,av;av=ax.length;for(aw=0;aw<av;aw++){Q(ax[aw].path)}}function ap(){var av=W.dom;av.productDetailContent.empty();av.productBuyContent.empty();av.productImg.empty();av.imgListWrap.empty();av.albumsWrap.empty();av.shareContent.empty()}function Y(){A=null;N=-1;X=null;n=null;at=null;ao=null;S=null;b=null;z=null;w=null;u=null;l=null;G=false;W.data={};k=82}function m(){var ay=W.dom,av=ay.panel,aA=ay.panelBtn,ax=ay.groupBtn,aw=ay.albumsBtn,az;aA.close.click(function(){ac()});aA.left.click(function(){T({scrollRow:false,direction:false,cycle:true,changeProduct:true})});aA.right.click(function(){T({scrollRow:false,direction:true,cycle:true,changeProduct:true})});aw.left.click(function(){T({scrollRow:true,direction:false})});aw.right.click(function(){T({scrollRow:true,direction:true})});ax.left.click(function(){al({scrollRow:true,direction:false})});ax.right.click(function(){al({scrollRow:true,direction:true})});ay.contentBg.click(function(){ac()});ay.productPicContent.hover(function(){if(!ay.imgList){return}var aB=ay.imgList.children();if(aB&&aB.length<2){return}az=setTimeout(function(){ay.productImgGroup.slideDown("normal",function(){ak()})},250)},function(){clearTimeout(az);ay.productImgGroup.slideUp()});ay.content.mouseleave(function(){clearTimeout(az);ay.productImgGroup.slideUp()})}function c(){var av=W.dom;if(Fai.top.$(".J_popup_bg").length>1){av.contentBg.css("opacity",".15")}}function O(av){var aw=W.dom;aw.panel=Fai.top.$("#fk-productSlidePanel");aw.content=aw.panel.find(".J_content");aw.contentBg=aw.panel.find(".J_contentBg");aw.panelBtn={};aw.panelBtn.left=aw.panel.find(".J_turnLeft");aw.panelBtn.right=aw.panel.find(".J_turnRight");aw.panelBtn.close=aw.panel.find(".J_close");aw.multiContent=aw.panel.find(".J_multiContent");aw.albumsContent=aw.panel.find(".J_albumsContent");aw.multiContentLeft=aw.multiContent.find(".J_multiContentLeft");aw.multiContentRight=aw.multiContent.find(".J_multiContentRight");aw.productDetailContent=aw.multiContentRight.find(".J_productDetailContent");aw.productBuyContent=aw.multiContentRight.find(".J_productBuyContent");aw.shareContent=aw.multiContentLeft.find(".J_shareContent");aw.productPicContent=aw.multiContentLeft.find(".J_productPicContent");aw.productImg=aw.multiContentLeft.find(".J_productImg");aw.productImgGroup=aw.multiContentLeft.find(".J_productImgGroup");aw.imgListWrap=aw.multiContentLeft.find(".J_imgListWrap");aw.groupBtn={};aw.groupBtn.left=aw.multiContentLeft.find(".J_groupLeft");aw.groupBtn.right=aw.multiContentLeft.find(".J_groupRight");aw.albumsWrap=aw.albumsContent.find(".J_albumsWrap");aw.albumsBtn={};aw.albumsBtn.left=aw.albumsContent.find(".J_albumsLeft");aw.albumsBtn.right=aw.albumsContent.find(".J_albumsRight");if(typeof av.eventFunc=="function"){setTimeout(function(){av.eventFunc.apply(W,arguments)},30)}if(typeof av.styleFunc=="function"){setTimeout(function(){av.styleFunc.apply(W,arguments)},30)}}function t(){ai({func:function(){var aw=W.dom;if(aw.panel&&aw.panel.length>0){if(aw.panel.is(":hidden")){aw.panel.show()}}else{Fai.top.$("#fk-productSlidePanel").show()}aj();I();au();a();p();o();r();setTimeout(function(){am()},50)}});if(Fai.top._manageMode&&J&&J.length>0){var av=W.dom.content;av.off("mousemove.productSlide").on("mousemove.productSlide",function(){Site.addEditLayer("fk-productSlideContent",J,100,{extCls:"fk-productSlideEditLayer"})});av.off("mouseleave.productSlide").on("mouseleave.productSlide",function(){Site.removeEditLayer("fk-productSlideContent")})}}function ac(){var av=W.dom;if(Fai.top._manageMode&&J){Site.removeEditLayer("fk-productSlideContent")}av.panel&&av.panel.hide();Y();W.dom={};W.cachePreviewImgList=[];j="";ae="";J=null;Fai.top.$("#fk-productSlidePanel").remove()}W.init=function(av){ac();Fai.top.$("body").append(H().join(""));j=av;an({qsUrl:av});O({eventFunc:m,styleFunc:c})};W.refresh=function(){ap();Y();an({qsUrl:j})};function ai(av){if(!Site.checkCssLoad(ae)&&M.trim(ae).length>0){Site.demandLoadCss(ae,function(){if(typeof av.func=="function"){av.func.apply(W,arguments)}})}else{if(typeof av.func=="function"){av.func.apply(W,arguments)}}}function s(){M(".f-propName").attr("class","f-propName paramResize");v();M(".f-propName,.u-paramResize-e,.u-paramResize-w").hover(function(){M(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"})},function(){M(".f-propName").css("border","1px dashed transparent")})}function v(){var av=M(".f-propListContent ").find(".f-propContent").find(".paramResize");if(av.length<1){return}av.each(function(){var aC=M(this),aw=Fai.isIE8()?M(document):M(window),aE,aB,ay=M(this),aA,az={},aG;if(aC.hasClass("paramResize")){aC.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+M(aC).outerHeight()+"px;z-index:999'></div></div>");aC.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+M(aC).outerHeight()+"px;z-index:999'></div></div>");M(".u-paramResize-e,.u-paramResize-w").css("cursor","e-resize")}aE=M(aC).prev();aB=M(aC).next();if(!aB.hasClass("u-paramResize-e")||!aE.hasClass("u-paramResize-w")){return}aE.off("mousedown.fi").on("mousedown.fi",aF);aB.off("mousedown.fi").on("mousedown.fi",aF);function aF(aH){aH=aH||window.event;az.x=aH.pageX;if(M(this).hasClass("u-paramResize-w")){az.dir="w";az.ptb=parseInt(ay.css("width"))}else{if(M(this).hasClass("u-paramResize-e")){az.dir="e";az.ptb=parseInt(ay.css("width"))}}aA=M("#dockTip").show().css({left:"-1000px;",top:"-1000px"});aw.off("mousemove.fi").on("mousemove.fi",ax);aw.off("mouseup.fi").on("mouseup.fi",aD);aH.preventDefault()}function ax(aK){M("body").css("cursor","e-resize");M(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"});aK=aK||window.event;var aL={x:aK.pageX},aI,aN,aH=1,aJ=200,aM="";if(az.dir=="w"){aI=az.x-aL.x;aN=az.ptb+aI;aN=aN>aH?aN:aH;aN=aN>aJ?aJ:aN;aN=Math.round(aN);aM="宽度:"}else{if(az.dir=="e"){aI=aL.x-az.x;aN=az.ptb+aI;aN=aN>aH?aN:aH;aN=aN>aJ?aJ:aN;aN=Math.round(aN);aM="宽度:"}}aG=aN;M(".f-propName").css({width:aN+"px"});M(".f-optionValue").css({width:(318-aN)+"px"});M(".f-countValue").css({width:(318-aN)+"px"});aA.html(aM+aN).css({left:aK.pageX-28,top:aK.pageY-40});aK.preventDefault()}function aD(aI){M("body").css("cursor","");M(".f-propName").css("border","1px dashed transparent");aI=aI||window.event;az.dir="";aw.off("mousemove.fi");aw.off("mouseup.fi");aA.hide();az={};var aH=ao.id;var aK="cmd=set&id="+aH+"&style=19&prop0=1&prop2="+aG;var aJ=Site.genAjaxUrl("module_h.jsp");Fai.ing("正在保存……",false);M.ajax({type:"post",url:aJ,data:aK,error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aM){var aL=M.parseJSON(aM);if(aL.success){Fai.ing("修改宽度成功",true);k=aG}else{Fai.ing(aL.msg,false);M(".J_productDetailContent").find(".f-propContent").find(".paramResize").css("width",k)}}});aI.preventDefault()}})}})(jQuery,Site.productSlide);